define(["@grafana/data","react","@emotion/css","@grafana/ui","lodash"],((e,t,l,a,n)=>(()=>{"use strict";var r={644:e=>{e.exports=l},305:t=>{t.exports=e},388:e=>{e.exports=a},980:e=>{e.exports=n},650:e=>{e.exports=t}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var l=o[e]={exports:{}};return r[e](l,l.exports,i),l.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var l in t)i.o(t,l)&&!i.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{i.r(s),i.d(s,{plugin:()=>U});var e=i(305),t=i(650),l=i.n(t),a=i(644),n=i(388);function r(e,t){const l=["information","warning","average","high","disaster"];let a=-1;if(!t)return a>=0?l[a]+"-state":"ok-state";for(const n of t){let t;for(const l of e)if(l.label===n.seriesMatch){t=l;break}if(!t)continue;const r=t.value;if("number"===n.displayMode&&n.numberThreshold){for(const[e,t]of Object.entries(n.numberThreshold))if(null!==t){if("showOnlyOnThreshold"===e)continue;if("number"==typeof r&&(n.revers?r<=parseFloat(t):r>=parseFloat(t))){const t=l.indexOf(e);t>a&&(a=t)}}}else if("string"===n.displayMode&&n.stringThreshold)for(const[e,t]of Object.entries(n.stringThreshold))if(String(r)===t){const t=l.indexOf(e);t>a&&(a=t)}}return a>=0?l[a]+"-state":"ok-state"}const o={eq:(e,t)=>e===t,ne:(e,t)=>e!==t,ge:(e,t)=>e>t,lt:(e,t)=>e<t};function u(e,t,l){const a=o[l];return!!a&&a(e,t)}function d(e,t,l,a){switch(l){case"name":return e;case"last_time":return t?t.timestamp:Date.now();default:return a[l]}}function c(t,l){const a=[];for(const l of t.fields)l.type!==e.FieldType.number&&l.type!==e.FieldType.string||a.push(l);const n=[];for(const r of a){const a=(0,e.reduceField)({field:r,reducers:["bogus"]}),o=(0,e.getFieldDisplayName)(r,t),i=d(o,null,l,a);let s=4;void 0!==r.config.decimals&&null!==r.config.decimals&&(s=r.config.decimals);const u=(0,e.getValueFormat)(r.config.unit)(i,s,void 0,void 0),c={thresholdLevel:0,value:i,valueFormatted:(0,e.formattedValueToString)(u),valueRounded:h(i,s)||i,stats:a,name:o,displayName:o,timestamp:0,prefix:"",suffix:"",color:"",clickThrough:"",operatorName:"",newTabEnabled:!0,sanitizedURL:"",sanitizeURLEnabled:!0,showName:!0,showValue:!0,isComposite:!1,members:[]};n.push(c)}return n}i(980);const h=(e,t)=>{if(null===e)return null;const l=Math.pow(10,t),a=(l*e).toFixed(t);return Math.round(parseFloat(a))/l};function m(e){const t=[];for(const l of e.series){const e=c(l,"last");console.log(e);for(const l of e)t.push({label:l.name,value:l.valueRounded})}return t}const p=(0,n.stylesFactory)((()=>({wrapper:a.css`
      position: relative;
    `,svg:a.css`
      position: absolute;
      top: 0;
      left: 0;
    `,textBox:a.css`
      position: absolute;
      bottom: 0;
      left: 0;
      padding: 10px;
    `,valueMap:a.css`
      font-size: 0.85em;
    `,bottom_section:a.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-content: center; 
      height: 100%;
    `,top_section:a.css`
      box-sizing: inherit;
      vertical-align: middle;
      height: 100%;
    `,status_name_row:a.css`
      color: #080808;
      overflow:hidden;
    `,h1:{margin:"0px 0px 0.15em",fontSize:"1.4rem","padding-top":"3px","letter-spacing":"-0.01893em"},a:{color:"#080808"},blink:a.css`
    animation-name: blinker;
    animation-iteration-count: infinite;
    animation-timing-function: cubic-bezier(1.0,2.0,0,1.0);
    animation-duration: 1s;
    animation-play-state: running;
    -webkit-animation-name: blinker;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-play-state: running;
    -webkit-animation-timing-function: cubic-bezier(1.0,2.0,0,1.0);
    -webkit-animation-duration: 1s;
    `}))),g=a.css`
  @keyframes blinker {
    from {
      opacity: 1.0;
    }
    50% {
      opacity: 0.5;
    }
    to {
      opacity: 1.0;
    }
  }

  @-webkit-keyframes blinker {
    from {
      opacity: 1.0;
    }
    50% {
      opacity: 0.5;
    }
    to {
      opacity: 1.0;
    }
  }
`,b=[{value:"number",label:"Number threshold"},{value:"string",label:"String threshold"},{value:"show",label:"Show only "}],f=[{value:"eq",label:"Equivalent"},{value:"ne",label:"Not equivalent"},{value:"ge",label:"Greater than"},{value:"lt",label:"Less than"}];function v(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}function w(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{},a=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(l).filter((function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable})))),a.forEach((function(t){v(e,t,l[t])}))}return e}function y(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);l.push.apply(l,a)}return l}(Object(t)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(t,l))})),e}const E=e=>{var a,r,o,i,s,u,d,h,m,p,g,v,E,T;const[C,k]=(0,t.useState)([]),[O,x]=(0,t.useState)(e.rule),[S,R]=(0,t.useState)((e=>{const t=b.keys();for(const l of t)if(b[l].value===e)return b[l];return b[0]})(e.rule.displayMode)),[I,M]=(0,t.useState)((e=>{const t=f.keys();for(const l of t)if(f[l].value===e)return f[l];return f[0]})(e.rule.logicalMode)),D=t=>{x(t),e.setter(O.order,t)},[P]=(0,t.useState)("eye"),[F]=(0,t.useState)("eye-slash");var V,N,j,U,$,A,_,L,z,B;return(0,t.useEffect)((()=>{if(e.context.data){let t=[],l=new Set;for(const t of e.context.data){let e=c(t,"last");for(const t of e)l.add(t.name)}for(const e of l)t.push({label:e,value:e});k(t)}}),[e.context.data]),l().createElement(n.Card,{heading:"",key:`rule-card-${e.ID}`},l().createElement(n.Card.Meta,null,l().createElement(n.FieldSet,null,l().createElement(n.Field,{label:"Rule Name",description:"Name or Regular Expression",disabled:!O.showRule},l().createElement(n.Input,{value:O.name,placeholder:"",onChange:e=>D(y(w({},O),{name:e.currentTarget.value}))})),l().createElement(n.Field,{label:"Metric",style:{minWidth:"175px"}},l().createElement(n.Cascader,{key:`cmi-index-${e.ID}`,initialValue:O.seriesMatch,allowCustomValue:!0,placeholder:"",options:C,onSelect:e=>D(y(w({},O),{seriesMatch:e}))})),l().createElement(n.Field,{label:"Alias metric name",description:"Used as metric name if exists"},l().createElement(n.Input,{value:O.alias,placeholder:"",onChange:e=>D(y(w({},O),{alias:e.currentTarget.value}))})),l().createElement(n.Field,{label:"Description",description:"Used on tooltip if exists"},l().createElement(n.TextArea,{value:O.description,placeholder:"",style:{resize:"both"},onChange:e=>D(y(w({},O),{description:e.currentTarget.value}))})),l().createElement(n.Field,{label:"Show metric name",description:"Toggle Display of metric name",disabled:!O.showRule},l().createElement(n.Switch,{transparent:!0,value:O.showName,disabled:!O.showRule,onChange:()=>{const e=O.showName;D(y(w({},O),{showName:!e}))}})),l().createElement(n.Field,{label:"Show metric value",description:"Toggle Display of metric value",disabled:!O.showRule},l().createElement(n.Switch,{transparent:!0,value:O.showValue,disabled:!O.showRule,onChange:()=>{const e=O.showValue;D(y(w({},O),{showValue:!e}))}})),l().createElement(n.Field,{label:"Display Mode",description:"Metric handler type",disabled:!O.showRule},l().createElement(n.Select,{menuShouldPortal:!0,value:S,onChange:e=>{R(e),D(y(w({},O),{displayMode:e.value}))},options:b})),"number"===O.displayMode?l().createElement(l().Fragment,null,l().createElement(n.Field,{label:"Show only on Threshold",disabled:!O.showRule},l().createElement(n.Switch,{transparent:!0,value:O.showOnlyOnThreshold,disabled:!O.showRule,onChange:()=>D(y(w({},O),{showOnlyOnThreshold:!O.showOnlyOnThreshold}))})),l().createElement(n.Field,{label:"Revers logic",description:"Inverse processing of values, if processing is needed from the largest to the smallest.",disabled:!O.showRule},l().createElement(n.Switch,{transparent:!0,value:O.revers,disabled:!O.showRule,onChange:()=>D(y(w({},O),{revers:!O.revers}))})),l().createElement(n.Field,{label:"Information threshold",disabled:!O.showRule},l().createElement(n.Input,{value:null!==(V=null===(a=O.numberThreshold)||void 0===a||null===(r=a.information)||void 0===r?void 0:r.toString())&&void 0!==V?V:"",placeholder:"1",onChange:e=>{var t;return D(y(w({},O),{numberThreshold:y(w({},O.numberThreshold),{information:e.currentTarget.value.match(/^[\d.]*$/)?e.currentTarget.value:null!==(N=null===(t=O.numberThreshold)||void 0===t?void 0:t.information)&&void 0!==N?N:null})}))}})),l().createElement(n.Field,{label:"Warning threshold",disabled:!O.showRule},l().createElement(n.Input,{value:null!==(j=null===(o=O.numberThreshold)||void 0===o||null===(i=o.warning)||void 0===i?void 0:i.toString())&&void 0!==j?j:"",placeholder:"2",onChange:e=>{var t;return D(y(w({},O),{numberThreshold:y(w({},O.numberThreshold),{warning:e.currentTarget.value.match(/^[\d.]*$/)?e.currentTarget.value:null!==(U=null===(t=O.numberThreshold)||void 0===t?void 0:t.warning)&&void 0!==U?U:null})}))}})),l().createElement(n.Field,{label:"Average threshold",disabled:!O.showRule},l().createElement(n.Input,{value:null!==($=null===(s=O.numberThreshold)||void 0===s||null===(u=s.average)||void 0===u?void 0:u.toString())&&void 0!==$?$:"",placeholder:"3",onChange:e=>{var t;return D(y(w({},O),{numberThreshold:y(w({},O.numberThreshold),{average:e.currentTarget.value.match(/^[\d.]*$/)?e.currentTarget.value:null!==(A=null===(t=O.numberThreshold)||void 0===t?void 0:t.average)&&void 0!==A?A:null})}))}})),l().createElement(n.Field,{label:"High threshold",disabled:!O.showRule},l().createElement(n.Input,{value:null!==(_=null===(d=O.numberThreshold)||void 0===d||null===(h=d.high)||void 0===h?void 0:h.toString())&&void 0!==_?_:"",placeholder:"4",onChange:e=>{var t;return D(y(w({},O),{numberThreshold:y(w({},O.numberThreshold),{high:e.currentTarget.value.match(/^[\d.]*$/)?e.currentTarget.value:null!==(L=null===(t=O.numberThreshold)||void 0===t?void 0:t.high)&&void 0!==L?L:null})}))}})),l().createElement(n.Field,{label:"Disaster threshold",disabled:!O.showRule},l().createElement(n.Input,{value:null!==(z=null===(m=O.numberThreshold)||void 0===m?void 0:m.disaster)&&void 0!==z?z:"",placeholder:"5",onChange:e=>{var t;return D(y(w({},O),{numberThreshold:y(w({},O.numberThreshold),{disaster:e.currentTarget.value.match(/^[\d.]*$/)?e.currentTarget.value:null!==(B=null===(t=O.numberThreshold)||void 0===t?void 0:t.disaster)&&void 0!==B?B:null})}))},type:"text",onKeyDown:e=>(69===e.keyCode||190===e.keyCode)&&e.preventDefault()}))):null,"string"===O.displayMode?l().createElement(l().Fragment,null,l().createElement(n.Field,{label:"Show only on Threshold",disabled:!O.showRule},l().createElement(n.Switch,{transparent:!0,value:O.showOnlyOnThreshold,disabled:!O.showRule,onChange:()=>D(y(w({},O),{showOnlyOnThreshold:!O.showOnlyOnThreshold}))})),l().createElement(n.Field,{label:"Information threshold",disabled:!O.showRule},l().createElement(n.Input,{value:null===(p=O.stringThreshold)||void 0===p?void 0:p.information,placeholder:"Information",onChange:e=>D(y(w({},O),{stringThreshold:y(w({},O.stringThreshold),{information:e.currentTarget.value})}))})),l().createElement(n.Field,{label:"Warning threshold",disabled:!O.showRule},l().createElement(n.Input,{value:null===(g=O.stringThreshold)||void 0===g?void 0:g.warning,placeholder:"Warning",onChange:e=>D(y(w({},O),{stringThreshold:y(w({},O.stringThreshold),{warning:e.currentTarget.value})}))})),l().createElement(n.Field,{label:"Average threshold",disabled:!O.showRule},l().createElement(n.Input,{value:null===(v=O.stringThreshold)||void 0===v?void 0:v.average,placeholder:"Average",onChange:e=>D(y(w({},O),{stringThreshold:y(w({},O.stringThreshold),{average:e.currentTarget.value})}))})),l().createElement(n.Field,{label:"High threshold",disabled:!O.showRule},l().createElement(n.Input,{value:null===(E=O.stringThreshold)||void 0===E?void 0:E.high,placeholder:"High",onChange:e=>D(y(w({},O),{stringThreshold:y(w({},O.stringThreshold),{high:e.currentTarget.value})}))})),l().createElement(n.Field,{label:"Disaster threshold",disabled:!O.showRule},l().createElement(n.Input,{value:null===(T=O.stringThreshold)||void 0===T?void 0:T.disaster,placeholder:"Disaster",onChange:e=>D(y(w({},O),{stringThreshold:y(w({},O.stringThreshold),{disaster:e.currentTarget.value})}))}))):null,"show"===O.displayMode?l().createElement(l().Fragment,null,l().createElement(n.Field,{label:"Use logical expressions",disabled:!O.showRule},l().createElement(n.Switch,{transparent:!0,value:O.logicExpress,disabled:!O.showRule,onChange:()=>D(y(w({},O),{logicExpress:!O.logicExpress}))})),O.logicExpress?l().createElement(l().Fragment,null,l().createElement(n.Field,{label:"Logical Mode",disabled:!O.showRule},l().createElement(n.Select,{menuShouldPortal:!0,value:I,onChange:e=>{M(e),D(y(w({},O),{logicalMode:e.value}))},options:f})),l().createElement(n.Field,{label:"Value",disabled:!O.showRule},l().createElement(n.Input,{value:O.logicExpressValue,placeholder:"100500",onChange:e=>D(y(w({},O),{logicExpressValue:e.currentTarget.value}))}))):null):null)),l().createElement(n.Card.Actions,null,l().createElement(n.IconButton,{key:"moveUp",name:"arrow-up",tooltip:"Move Up",onClick:()=>{e.moveUp(O.order)}}),l().createElement(n.IconButton,{key:"moveDown",name:"arrow-down",tooltip:"Move Down",onClick:()=>{e.moveDown(O.order)}}),l().createElement(n.IconButton,{key:"showRule",name:O.showRule?P:F,tooltip:"Hide/Show Rule",onClick:()=>D(y(w({},O),{showRule:!O.showRule}))}),l().createElement(n.IconButton,{key:"copyRule",name:"copy",tooltip:"Duplicate",onClick:()=>{e.createDuplicate(O.order)}}),l().createElement(n.IconButton,{key:"deleteRule",variant:"destructive",name:"trash-alt",tooltip:"Delete Rule",onClick:()=>{e.remover(O.order)}})))},T={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let C;const k=new Uint8Array(16);function O(){if(!C&&(C="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!C))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return C(k)}const x=[];for(let e=0;e<256;++e)x.push((e+256).toString(16).slice(1));const S=function(e,t,l){if(T.randomUUID&&!t&&!e)return T.randomUUID();const a=(e=e||{}).random||(e.rng||O)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){l=l||0;for(let e=0;e<16;++e)t[l+e]=a[e];return t}return function(e,t=0){return(x[e[t+0]]+x[e[t+1]]+x[e[t+2]]+x[e[t+3]]+"-"+x[e[t+4]]+x[e[t+5]]+"-"+x[e[t+6]]+x[e[t+7]]+"-"+x[e[t+8]]+x[e[t+9]]+"-"+x[e[t+10]]+x[e[t+11]]+x[e[t+12]]+x[e[t+13]]+x[e[t+14]]+x[e[t+15]]).toLowerCase()}(a)},R=({context:e,onChange:a})=>{const[r]=(0,t.useState)(e.options.ruleConfig),[o,i]=(0,t.useState)((()=>{if(!r.rules)return[];const e=[];return r.rules.forEach(((t,l)=>{e[l]={rule:t,order:l,ID:S()}})),e})),s=e=>{i(e);const t=[];e.forEach((e=>{t.push(e.rule)})),a({rules:t})},[u,d]=(0,t.useState)((()=>{if(!o)return[];let e=o.length;const t=[];for(;e--;)t[e]=!1;return t})),c=(e,t,l)=>{if(l>=e.length){let t=l-e.length+1;for(;t--;)e.push(void 0)}e.splice(l,0,e.splice(t,1)[0])},h=e=>{if(e!==o.length-1){c(o,e,e+1);for(let e=0;e<o.length;e++)o[e].order=e,o[e].rule.order=e;s([...o])}},m=e=>{if(e>0){c(o,e,e-1);for(let e=0;e<o.length;e++)o[e].order=e,o[e].rule.order=e;s([...o])}},p=e=>{const t=o[e].rule,l=o.length,a={rule:{name:`${t.name} Copy`,label:`${t.name} Copy`,order:l,isTemplated:t.isTemplated,displayMode:t.displayMode,enabled:t.enabled,showName:t.showName,showValue:t.showValue,showRule:t.showRule,showMembers:t.showMembers,logicExpress:t.logicExpress,logicExpressValue:t.logicExpressValue,clickThrough:t.clickThrough,clickThroughOpenNewTab:t.clickThroughOpenNewTab,clickThroughSanitize:t.clickThroughSanitize,alias:t.alias,description:t.alias,shortAlias:t.shortAlias,seriesMatch:t.seriesMatch,logicalMode:t.logicalMode,numberThreshold:t.numberThreshold,stringThreshold:t.stringThreshold,showOnlyOnThreshold:t.showOnlyOnThreshold,revers:t.revers},order:l,ID:S()};s([...o,a]),d([...u,!0])},g=(e,t)=>{o[e].rule=t,s([...o])},v=e=>{const t=[...o];let l=0;for(let a=0;a<t.length;a++)if(t[a].order===e){l=a;break}t.splice(l,1);for(let e=0;e<t.length;e++)t[e].order=e;s([...t])};return l().createElement(l().Fragment,null,l().createElement(n.Button,{style:{marginBottom:"16px"},fill:"solid",variant:"primary",icon:"plus",onClick:()=>{const e=o.length,t={rule:{name:`Rule-${e}`,label:`Rule-${e}`,showName:!0,showValue:!0,showMembers:!1,showOnlyOnThreshold:!1,revers:!1,numberThreshold:{information:"",warning:"",average:"",high:"",disaster:""},stringThreshold:{information:"",warning:"",average:"",high:"",disaster:""},logicExpress:!1,logicalMode:f[0].value,logicExpressValue:"",showRule:!0,isTemplated:!1,enabled:!0,displayMode:b[0].value,clickThrough:"",clickThroughOpenNewTab:!0,clickThroughSanitize:!0,order:e,alias:"",description:"",shortAlias:"",seriesMatch:""},order:e,ID:S()};s([...o,t]),d([...u,!0])}},"Add Rule"),o&&o.map(((t,a)=>l().createElement(n.Collapse,{key:`collapse-item-index-${t.ID}`,label:t.rule.name,isOpen:u[a],onToggle:()=>(e=>{const t=[...u];t[e]=!t[e],d([...t])})(a),collapsible:!0},l().createElement(E,{key:`rule-item-index-${t.ID}`,ID:t.ID,rule:t.rule,enabled:t.rule.enabled,setter:g,remover:v,moveUp:m,moveDown:h,createDuplicate:p,context:e})))))},I="rgba(55, 135, 45, 0.9)",M="rgba(196, 22, 42, 0.9)",D="rgba(217, 92, 29, 0.9)",P="rgba(250, 100, 0, 0.99)",F="rgba(224, 180, 0, 0.99)",V="rgba(138, 184, 255, 0.99)",N="rgba(128, 128, 128, 0.9)",j="rgba(20, 60, 120, 0.9)",U=new e.PanelPlugin((({options:e,data:o,width:i,height:s,id:d,replaceVariables:c})=>{const h=p(),[b,f]=(0,t.useState)(null),[v,w]=(0,t.useState)(!1),y=(0,t.useMemo)((()=>[]),[]);(0,t.useEffect)((()=>{w(!1),"enable"===e.statePanel?f(r(m(o),e.ruleConfig.rules)):"na"===e.statePanel?f("na-state"):f("disable-state")}),[o,e.ruleConfig.rules,e.statePanel]),(0,t.useEffect)((()=>{w(!1),"not-ok-state"!==y[d]&&"ok-state"===b?(void 0!==y[d]&&w(!0),y[d]="not-ok-state"):"not-disaster-state"!==y[d]&&"disaster-state"===b?(void 0!==y[d]&&w(!0),y[d]="not-disaster-state"):"not-high-state"!==y[d]&&"high-state"===b?(void 0!==y[d]&&w(!0),y[d]="not-high-state"):"not-average-state"!==y[d]&&"average-state"===b?(void 0!==y[d]&&w(!0),y[d]="not-average-state"):"not-warning-state"!==y[d]&&"warning-state"===b?(void 0!==y[d]&&w(!0),y[d]="not-warning-state"):"not-information-state"!==y[d]&&"information-state"===b&&(void 0!==y[d]&&w(!0),y[d]="not-information-state")}),[d,b,y]);const E=v&&e.blink?h.blink:"",T=function(e,t){switch(e){case"ok-state":return t.ColorOK;case"disaster-state":return t.ColorDisaster;case"high-state":return t.ColorHigh;case"average-state":return t.ColorAverage;case"warning-state":return t.ColorWarning;case"information-state":return t.ColorInformation;case"disable-state":return t.ColorDisable;case"na-state":return t.ColorNa;default:return"rgba(0, 0, 0, 0)"}}(null!=b?b:"",e),[C,k]=(0,t.useState)([]);return(0,t.useEffect)((()=>{let t=function(e,t){const l={};e.forEach((e=>{l[e.label]?l[e.label]++:l[e.label]=1})),Object.entries(l).forEach((([e,t])=>{t>1&&alert(`Warning: multiple metrics with the label "${e}" were found.`)}));const a=[];if(t){for(const l of t){let t;for(const a of e)if(a.label===l.seriesMatch){t=a;break}if(t&&t){if(("number"===l.displayMode||"string"===l.displayMode)&&l.showOnlyOnThreshold&&"ok-state"===r([t],[l]))continue;const e=t.value;let n=!0;if("show"===l.displayMode&&l.logicExpress&&(n=u(e,l.logicExpressValue,l.logicalMode)),n){let n="";l.showName&&(l.alias?n+=l.alias:n+=t.label),l.showName&&l.showValue&&(n+=": "),l.showValue&&(n+=e),(l.showName||l.showValue)&&a.push({line:n,tooltip:l.description?l.description:""})}}}return a}}(m(o),e.ruleConfig.rules);k(t||[])}),[o,e]),l().createElement("div",{className:(0,a.cx)(h.wrapper,E,g,a.css`
          width: ${i+16}px;
          height: ${s+16}px;
	        text-align: center;
          overflow: hidden;
          position: relative;
          border-radius: 3px;
          backface-visibility: hidden;
          transition: transform 0.5s;
	        margin: -8px 0 0 -8px;
          background-color: ${T}};
        `)},l().createElement("div",{className:h.top_section},l().createElement("div",{className:h.bottom_section},l().createElement("div",{className:h.status_name_row},l().createElement("h1",{style:h.h1},e.dataLink?l().createElement("a",{style:h.a,href:c(e.dataLink)},c(e.panelName)):l().createElement("span",{style:h.a},c(e.panelName))),"enable"===e.statePanel?l().createElement("div",{className:h.valueMap},e.modePanel&&"in"===e.modePanel?C.map(((e,t)=>l().createElement("span",{key:t},e.tooltip?l().createElement(n.Tooltip,{content:l().createElement("div",{style:{whiteSpace:"pre-wrap"}},e.tooltip)},l().createElement("span",null,e.line)):l().createElement("span",null,e.line),l().createElement("span",null,t<C.length-1?" / ":"")))):C.map(((e,t)=>l().createElement("div",{key:t},e.tooltip?l().createElement(n.Tooltip,{content:l().createElement("div",{style:{whiteSpace:"pre-wrap"}},e.tooltip)},l().createElement("span",null,e.line)):l().createElement("span",null,e.line))))):""))))})).setPanelOptions((e=>e.addTextInput({path:"panelName",name:"Panel name",category:["Overall"],defaultValue:"ololo panel"}).addRadio({path:"statePanel",defaultValue:"enable",name:"State panel",category:["Overall"],settings:{options:[{value:"enable",label:"Enable"},{value:"disable",label:"Disable"},{value:"na",label:"N/A"}]}}).addRadio({path:"modePanel",defaultValue:"line",name:"Mode panel",category:["Overall"],settings:{options:[{value:"line",label:"Line by line"},{value:"in",label:"In one line"}]}}).addBooleanSwitch({name:"Blink",path:"blink",defaultValue:!0,category:["Overall"]}).addTextInput({path:"dataLink",name:"DataLink",category:["Overall"],description:"Used on panel name if exist.\n\tExample: d/HQgMW5LVk/new-dashboard?orgId=1&refresh=30s&var-query0=$query0",defaultValue:""}).addColorPicker({name:"OK Color (default: "+I+")",path:"ColorOK",category:["Color"],defaultValue:I,showIf:e=>"enable"===e.statePanel}).addColorPicker({name:"Disable Color (default: "+N+")",path:"ColorDisable",category:["Color"],defaultValue:N}).addColorPicker({name:"Information Color (default: "+V+")",path:"ColorInformation",category:["Color"],defaultValue:V,showIf:e=>"enable"===e.statePanel}).addColorPicker({name:"Warning Color (default: "+F+")",path:"ColorWarning",category:["Color"],defaultValue:F,showIf:e=>"enable"===e.statePanel}).addColorPicker({name:"Average Color (default: "+P+")",path:"ColorAverage",category:["Color"],defaultValue:P,showIf:e=>"enable"===e.statePanel}).addColorPicker({name:"High Color (default: "+D+")",path:"ColorHigh",category:["Color"],defaultValue:D,showIf:e=>"enable"===e.statePanel}).addColorPicker({name:"Disaster Color (default: "+M+")",path:"ColorDisaster",category:["Color"],defaultValue:M,showIf:e=>"enable"===e.statePanel}).addColorPicker({name:"N/A Color (default: "+j+")",path:"ColorNa",category:["Color"],defaultValue:j,showIf:e=>"enable"===e.statePanel}).addCustomEditor({name:"Rules",id:"ruleConfig",path:"ruleConfig",editor:R,defaultValue:{rule:[],enabled:!0,animationSpeed:"1500"},category:["Rules"]})))})(),s})()));
//# sourceMappingURL=module.js.map